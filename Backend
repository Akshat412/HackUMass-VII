const express = require('express');
const admin = require('firebase-admin');
import { defaultValues } from "./defaultValues";


const app = express();

var refreshToken; // Get refresh token from OAuth2 flow

admin.initializeApp({
  credential: admin.credential.cert(serviceAccount),
  databaseURL: "https://hackumass-3445e.firebaseio.com"
});

// Set the configuration for your app
  var config = {
    apiKey: "apiKey",
    databaseURL: "https://hackumass-3445e.firebaseio.com"
  };
  firebase.initializeApp(config);

  // Get a reference to the database service
  var database = firebase.database();

  function writeUserData(userId, name, email) {
    firebase.database().ref('users/' + userId).set({
      username: name,
      email: email,
    });
  }

var userId = firebase.auth().currentUser.uid;
return firebase.database().ref('/users/' + userId).once('value').then(function(snapshot) {
  var username = (snapshot.val() && snapshot.val().username) || 'Anonymous';
});

const PORT = process.env.PORT || 3000;

app.listen(PORT, () => {
	console.log(`server started at http://localhost:${ PORT }`)
});
